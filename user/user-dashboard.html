<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | BaoCarLiao</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="../static/css/user/user.css">
  <link rel="stylesheet" href="../static/css/user/user-dashboard.css">
</head>
<body>
  <!-- Header will be loaded here -->
  <div id="header"></div>
  
  <main class="dashboard-main">
    <div class="container">
      <!-- Welcome Section -->
      <section class="welcome-section">
        <div class="welcome-content">
          <h1 id="welcome-message">Welcome back!</h1>
          <p class="welcome-subtitle">Find and book available cars near you</p>
        </div>
        <div class="welcome-illustration">
          <img src="../static/images/dashboard-illustration.svg" alt="Car rental illustration">
        </div>
      </section>
      
      <!-- Search Section -->
      <section class="search-section card">
        <div class="card-body">
          <h2 class="search-title">Search for a car</h2>
          
          <form id="search-form" class="search-form">
            <!-- Location Search -->
            <div class="form-group location-group">
              <label for="location-search">
                <i class="bi bi-geo-alt"></i> Location
              </label>
              <div class="input-with-button">
                <input 
                  type="text" 
                  id="location-search" 
                  class="form-control" 
                  placeholder="Enter a location in Singapore"
                  required>
                <button 
                  type="button" 
                  id="current-location-btn" 
                  class="btn btn-outline-primary location-btn">
                  <i class="bi bi-geo-alt"></i> Current Location
                </button>
              </div>
              <div id="location-error" class="error-message"></div>
            </div>
            
            <!-- Date and Time Selection -->
            <div class="date-time-selection">
              <div class="form-group">
                <label for="start-date">
                  <i class="bi bi-calendar3"></i> Start Date
                </label>
                <input type="date" id="start-date" class="form-control" required>
              </div>
              
              <div class="form-group">
                <label for="start-time">
                  <i class="bi bi-clock"></i> Start Time
                </label>
                <select id="start-time" class="form-select" required>
                  <!-- Will be populated by JS -->
                </select>
              </div>
              
              <div class="form-group">
                <label for="end-date">
                  <i class="bi bi-calendar3"></i> End Date
                </label>
                <input type="date" id="end-date" class="form-control" required>
              </div>
              
              <div class="form-group">
                <label for="end-time">
                  <i class="bi bi-clock"></i> End Time
                </label>
                <select id="end-time" class="form-select" required>
                  <!-- Will be populated by JS -->
                </select>
              </div>
            </div>
            
            <div id="time-hints" class="time-hints">
              <!-- Dynamic time hints will appear here -->
            </div>
            
            <!-- Advanced Filters -->
            <div class="advanced-filters">
              <div class="filter-group">
                <label for="car-type-filter">Car Type</label>
                <select id="car-type-filter" class="form-select">
                  <option value="all">All Types</option>
                  <!-- Will be populated by JS -->
                </select>
              </div>
              
              <div class="filter-group">
                <label for="search-radius">
                  Search Radius: <span id="radius-value">10</span> km
                </label>
                <input 
                  type="range" 
                  id="search-radius" 
                  class="form-range" 
                  min="1" 
                  max="25" 
                  value="10">
              </div>
            </div>
            
            <!-- Search Button -->
            <div class="search-button-container">
              <button type="submit" class="btn btn-primary search-btn">
                <i class="bi bi-search"></i> Search Available Cars
              </button>
            </div>
          </form>
        </div>
      </section>
      
      <!-- Map Section -->
      <section class="map-section">
        <div id="map" class="map-container"></div>
      </section>
      
      <!-- Search Results Section -->
      <section id="nearby-vehicles" class="results-section" style="display: none;">
        <div class="section-header">
          <h2>Available Cars Near You</h2>
          <div class="results-actions">
            <div class="sort-select">
              <select id="sort-select" class="form-select form-select-sm">
                <option value="distance">Nearest First</option>
                <option value="price_low">Price: Low to High</option>
                <option value="price_high">Price: High to Low</option>
                <option value="rating">Highest Rated</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- Loading spinner for search -->
        <div id="search-spinner" class="search-spinner">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p>Searching for available cars...</p>
        </div>
        
        <!-- No results message -->
        <div id="no-results" class="no-results" style="display: none;">
          <img src="../static/images/no-results.svg" alt="No cars available" class="no-results-img">
          <h3>No cars available</h3>
          <p>Try adjusting your search criteria or expanding your search radius.</p>
        </div>
        
        <!-- Results Grid -->
        <div id="vehicles-grid" class="vehicles-grid">
          <!-- Car cards will be dynamically added here -->
        </div>
      </section>
      
      <!-- Active Bookings Section -->
      <section id="active-bookings" class="bookings-section">
        <!-- Will be populated by JS -->
      </section>
    </div>
  </main>
  
  <!-- Car Details Modal -->
  <div class="modal fade" id="car-details-modal" tabindex="-1" aria-labelledby="carDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="carDetailsModalLabel">Car Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="car-details-content">
          <!-- Car details will be dynamically loaded here -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="book-now-btn">Book Now</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Footer will be loaded here -->
  <div id="footer"></div>
  
  <!-- Templates -->
  <template id="car-card-template">
    <div class="car-card">
      <div class="car-image">
        <img src="" alt="Car Image">
        <span class="car-distance"><i class="bi bi-geo-alt"></i> <span class="distance-value"></span> km</span>
      </div>
      <div class="car-details">
        <h3 class="car-name"></h3>
        <div class="car-specs">
          <span class="car-spec"><i class="bi bi-people"></i> <span class="seats-value"></span></span>
          <span class="car-spec"><i class="bi bi-fuel-pump"></i> <span class="fuel-type"></span></span>
          <span class="car-spec"><i class="bi bi-speedometer2"></i> <span class="transmission"></span></span>
        </div>
        <div class="car-price">
          <span class="price-value"></span>
          <span class="price-unit">/hour</span>
        </div>
        <div class="car-actions">
          <button class="btn btn-outline-primary view-details-btn">View Details</button>
          <button class="btn btn-primary book-btn">Book Now</button>
        </div>
      </div>
    </div>
  </template>
  
  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
  <script type="module" src="../static/js/user/user-dashboard.js"></script>
</body>
</html>