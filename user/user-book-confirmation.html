<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Confirm Booking | BaoCarLiao</title>
    <link rel="stylesheet" href="../static/css/users/user.css" />
    <link
      rel="stylesheet"
      href="../static/css/users/user-booking-confirmation.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
    />
  </head>
  <body>
    <div id="header"></div>

    <main>
      <div class="container">
        <!-- Back Navigation -->
        <div class="back-nav">
          <a href="javascript:history.back()" class="back-link">
            <i class="bi bi-arrow-left"></i> Back
          </a>
        </div>

        <div class="confirmation-container">
          <div class="confirmation-header">
            <h1>Confirm Your Booking</h1>
            <p>Please review your booking details before confirming</p>
          </div>

          <!-- Booking Summary -->
          <section class="confirmation-section">
            <h2>Booking Details</h2>
            <div class="booking-summary" id="booking-summary">
              <div class="car-overview">
                <div class="car-image">
                  <img
                    id="car-image"
                    src="../static/assets/images/car-placeholder.jpg"
                    alt="Car image"
                  />
                </div>
                <div class="car-info">
                  <!-- Add car plate display -->
                  <div class="car-plate" id="car-plate">PLATE NA</div>

                  <h3 id="car-name">Car Model</h3>
                  <div class="car-tag" id="car-type">Sedan</div>
                  <div class="car-detail">
                    <i class="bi bi-people-fill"></i>
                    <span id="car-seats">5 seats</span>
                  </div>
                  <div class="car-detail">
                    <i class="bi bi-briefcase-fill"></i>
                    <span
                      >Small Luggage: <span id="small-luggage">0</span></span
                    >
                  </div>
                  <div class="car-detail">
                    <i class="bi bi-suitcase-fill"></i>
                    <span>Big Luggage: <span id="big-luggage">0</span></span>
                  </div>
                </div>
              </div>

              <div class="booking-details-grid">
                <div class="detail-item">
                  <div class="detail-label">
                    <i class="bi bi-geo-alt-fill"></i>
                    <span>Location</span>
                  </div>
                  <div class="detail-value" id="car-address">
                    123 Main Street, Singapore
                  </div>
                </div>

                <div class="detail-item">
                  <div class="detail-label">
                    <i class="bi bi-calendar-event"></i>
                    <span>Pickup</span>
                  </div>
                  <div class="detail-value" id="pickup-time">
                    June 1, 2023 2:00 PM
                  </div>
                </div>

                <div class="detail-item">
                  <div class="detail-label">
                    <i class="bi bi-hourglass-split"></i>
                    <span>Duration</span>
                  </div>
                  <div class="detail-value" id="booking-duration">2 hours</div>
                </div>

                <div class="detail-item">
                  <div class="detail-label">
                    <i class="bi bi-calendar-check"></i>
                    <span>Return</span>
                  </div>
                  <div class="detail-value" id="return-time">
                    June 1, 2023 4:00 PM
                  </div>
                </div>

              </div>
            </div>
          </section>

          <!-- Price Summary -->
          <section class="confirmation-section">
            <h2>Price Summary</h2>
            <div class="price-summary">
              <div class="price-row">
                <span>Base Rate</span>
                <span>$<span id="hourly-rate">8.50</span>/hour</span>
              </div>
              <div class="price-row">
                <span>Duration</span>
                <span id="duration-text">2 hours</span>
              </div>
              <div class="price-row">
                <span>Subtotal</span>
                <span>$<span id="subtotal">17.00</span></span>
              </div>
              <div class="price-row total">
                <span>Total</span>
                <span>$<span id="total-price">17.00</span></span>
              </div>
            </div>
          </section>

          <!-- Terms & Conditions -->
          <section class="confirmation-section terms-section">
            <div class="terms-agreement">
              <input type="checkbox" id="terms-checkbox" />
              <label for="terms-checkbox">
                I agree to the
                <a href="../common/terms.html" class="terms-link">Terms and Conditions</a> of the
                car rental
              </label>
            </div>

            <div class="error-message" id="terms-error" style="display: none">
              <i class="bi bi-exclamation-triangle"></i>
              <span>You must agree to the terms and conditions</span>
            </div>
          </section>

          <!-- Actions -->
          <section class="confirmation-actions">
            <button id="modify-btn" class="secondary-btn">
              <i class="bi bi-pencil"></i> Modify Booking
            </button>
            <button id="confirm-btn" class="primary-btn" disabled>
              <i class="bi bi-check-lg"></i> Confirm Booking
            </button>
          </section>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay" style="display: none">
          <div class="loading-spinner"></div>
          <p>Processing your booking...</p>
        </div>

        <!-- Error message area -->
        <div id="error-message" class="error-container" style="display: none">
          <div class="error-icon">
            <i class="bi bi-exclamation-circle"></i>
          </div>
          <p>An error occurred. Please try again.</p>
          <button onclick="history.back()" class="secondary-btn">
            Go Back
          </button>
        </div>
      </div>
    </main>

    <div id="footer"></div>

    <!-- Scripts -->
    <script src="../static/js/common/firebase-config.js" type="module"></script>
    <script src="../static/js/common/auth.js" type="module"></script>
    <script
      src="../static/js/user/user-book-confirmation.js"
      type="module"
    ></script>
  </body>
</html>
