<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Profile | BaoCarLiao</title>
    <link rel="stylesheet" href="../static/css/users/user.css" />
    <link rel="stylesheet" href="../static/css/users/user-profile.css" />
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
    />
</head>
<body>
    <div id="header"></div>

    <main>
        <!-- Page Header -->
        <section id="profile-header">
            <div class="section-header">
                <h1><i class="bi bi-person-circle"></i> My Profile</h1>
                <button id="logout-button" class="secondary-btn">
                    <i class="bi bi-box-arrow-right"></i> Logout
                </button>
            </div>
        </section>
        
        <!-- Profile Content -->
        <div class="profile-container">
            <!-- Profile Summary -->
            <section class="profile-summary-card">
                <div class="profile-photo-container">
                    <img id="profile-pic-preview" src="../static/images/assets/default-profile.png" alt="Profile Photo" />
                    <div class="profile-photo-overlay">
                        <label for="profile-pic-input">
                            <i class="bi bi-camera"></i>
                        </label>
                        <input type="file" id="profile-pic-input" accept="image/*" hidden />
                    </div>
                </div>
                <div class="profile-summary-info">
                    <h2 id="profile-name">Loading...</h2>
                    <p class="member-since">Member since <span id="account-since">...</span></p>
                </div>
            </section>

            <!-- Profile Tabs Navigation -->
            <div class="profile-tabs">
                <button class="tab-btn active" data-tab="personal-info">
                    <i class="bi bi-person"></i> Personal Info
                </button>
                <button class="tab-btn" data-tab="email-password">
                    <i class="bi bi-shield-lock"></i> Email & Password
                </button>
                <button class="tab-btn" data-tab="payment-info">
                    <i class="bi bi-credit-card"></i> Payment Info
                </button>
                <button class="tab-btn" data-tab="account">
                    <i class="bi bi-gear"></i> Account
                </button>
            </div>

            <!-- Tab Content: Personal Info -->
            <div class="tab-content active" id="personal-info">
                <div class="profile-card">
                    <div class="card-header">
                        <h3>Personal Information</h3>
                        <p>Update your basic personal information</p>
                    </div>
                    <div class="card-body">
                        <form id="profile-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="first-name">First Name</label>
                                    <input type="text" id="first-name" name="firstName" required />
                                </div>
                                <div class="form-group">
                                    <label for="last-name">Last Name</label>
                                    <input type="text" id="last-name" name="lastName" required />
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="phone">Phone Number</label>
                                    <input type="tel" id="phone" name="phone" placeholder="8-digit phone number" maxlength="8" required />
                                </div>
                                <div class="form-group">
                                    <label for="address">Address</label>
                                    <input type="text" id="address" name="address" />
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="license-number">Driver's License Number</label>
                                    <input type="text" id="license-number" name="licenseNumber" required />
                                </div>
                                <div class="form-group">
                                    <label for="license-issue-date">License Issue Date</label>
                                    <input type="date" id="license-issue-date" name="licenseIssueDate" required />
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="primary-btn">
                                    <i class="bi bi-check-lg"></i> Update Profile
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Email & Password -->
            <div class="tab-content" id="email-password">
                <div class="profile-card">
                    <div class="card-header">
                        <h3>Email Address</h3>
                        <p>Update your email address</p>
                    </div>
                    <div class="card-body">
                        <div class="current-info">
                            <label>Current Email</label>
                            <p id="current-email">loading@example.com</p>
                        </div>

                        <form id="email-form">
                            <div class="form-group">
                                <label for="new-email">New Email Address</label>
                                <input type="email" id="new-email" name="newEmail" required />
                            </div>

                            <div class="form-group password-group">
                                <label for="current-password-email">Current Password</label>
                                <div class="password-input-container">
                                    <input type="password" id="current-password-email" name="currentPassword" required />
                                    <button type="button" class="toggle-password-btn">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="primary-btn">
                                    <i class="bi bi-check-lg"></i> Update Email
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="profile-card">
                    <div class="card-header">
                        <h3>Password</h3>
                        <p>Update your password</p>
                    </div>
                    <div class="card-body">
                        <form id="password-form">
                            <div class="form-group password-group">
                                <label for="current-password">Current Password</label>
                                <div class="password-input-container">
                                    <input type="password" id="current-password" name="currentPassword" required />
                                    <button type="button" class="toggle-password-btn">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="form-group password-group">
                                <label for="new-password">New Password</label>
                                <div class="password-input-container">
                                    <input type="password" id="new-password" name="newPassword" minlength="8" required />
                                    <button type="button" class="toggle-password-btn">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                </div>
                                <div class="hint-text">Minimum 8 characters</div>
                            </div>

                            <div class="form-group password-group">
                                <label for="confirm-password">Confirm New Password</label>
                                <div class="password-input-container">
                                    <input type="password" id="confirm-password" name="confirmPassword" minlength="8" required />
                                    <button type="button" class="toggle-password-btn">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="primary-btn">
                                    <i class="bi bi-check-lg"></i> Update Password
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Payment Info -->
            <div class="tab-content" id="payment-info">
                <div class="profile-card">
                    <div class="card-header">
                        <h3>Payment Information</h3>
                        <p>Update your payment details</p>
                    </div>
                    <div class="card-body">
                        <form id="payment-form">
                            <div class="form-group">
                                <label for="card-number">Card Number</label>
                                <input type="text" id="card-number" name="cardNumber" placeholder="**** **** **** ****" maxlength="19" required />
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="card-expiry">Expiry Date</label>
                                    <input type="text" id="card-expiry" name="cardExpiry" placeholder="MM/YY" maxlength="5" required />
                                </div>
                                <div class="form-group">
                                    <label for="card-cvv">CVV</label>
                                    <input type="text" id="card-cvv" name="cardCvv" placeholder="***" maxlength="3" required />
                                </div>
                            </div>

                            <div class="card-security-notice">
                                <i class="bi bi-shield-lock"></i>
                                <p>Your payment information is securely stored and encrypted</p>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="primary-btn">
                                    <i class="bi bi-check-lg"></i> Update Payment Info
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Account -->
            <div class="tab-content" id="account">
                <div class="profile-card">
                    <div class="card-header">
                        <h3>Account Actions</h3>
                        <p>Manage your account settings</p>
                    </div>
                    <div class="card-body">
                        <div class="account-action danger-zone">
                            <div class="action-info">
                                <h4>Delete Account</h4>
                                <p>Permanently delete your account and all associated data</p>
                            </div>
                            <button id="delete-account-btn" class="danger-btn">
                                <i class="bi bi-trash"></i> Delete Account
                            </button>
                        </div>

                        <div class="danger-zone-notice">
                            <i class="bi bi-exclamation-triangle"></i>
                            <p>Account deletion cannot be undone. All your data will be permanently removed.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="footer"></div>

    <!-- Re-Authentication Modal -->
    <div id="re-auth-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="bi bi-shield-lock"></i> Confirm Identity</h3>
                <button class="close-btn" id="close-modal">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>For security reasons, please re-enter your password to continue.</p>
                <form id="re-auth-form">
                    <div class="form-group password-group">
                        <label for="auth-password">Current Password</label>
                        <div class="password-input-container">
                            <input type="password" id="auth-password" name="password" required />
                            <button type="button" class="toggle-password-btn">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="primary-btn">
                            <i class="bi bi-check-lg"></i> Confirm
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Processing...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="error-toast" class="toast error">
        <i class="bi bi-exclamation-circle"></i>
        <span id="error-message">Error message here</span>
        <button class="close-toast"><i class="bi bi-x"></i></button>
    </div>

    <div id="success-toast" class="toast success">
        <i class="bi bi-check-circle"></i>
        <span id="success-message">Success message here</span>
        <button class="close-toast"><i class="bi bi-x"></i></button>
    </div>

    <!-- Scripts -->
    <script src="../static/js/common/firebase-config.js" type="module"></script>
    <script src="../static/js/common/auth.js" type="module"></script>
    <script src="../static/js/user/user-profile.js" type="module"></script>
</body>
</html>